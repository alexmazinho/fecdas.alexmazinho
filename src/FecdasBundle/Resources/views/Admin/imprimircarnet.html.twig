{# src/Fecdas/PartesBundle/Resources/views/Admin/imprimircarnet.html.twig #}
{% extends 'FecdasBundle::layout.html.twig' %}

{% form_theme form 'FecdasBundle:Includes:formtheming.html.twig' %}

{% block stylesheets %}
	
	<link href="{{ asset('css/jquery.datetimepicker.css') }}" type="text/css" rel="stylesheet" />
	
	{{ parent() }}
{% endblock %}

{% block title %}Aplicació gestió FECDAS. Formulari d'impressió de carnets {% endblock %}

{% block body %}
    <header>
        <h1>Formulari d'impressió de carnets</h1>
    </header>
	{% include 'FecdasBundle:Includes:messages.html.twig' %}
    
	<form id="formcarnet" action="{{ path('FecdasBundle_imprimircarnet') }}" method="post" {{ form_enctype(form) }}  class="appform">
		<div class="row">
			 <div class="col-md-4">
				{{ form_label(form.federat, '(Opcional) Cerca federat') }}
				<div id="formcarnet-federat"  class="form-group">
					{{ form_widget(form.federat, { 'attr': {'class': 'form-control form-control-left'} }) }}
				</div>
			 </div>
		</div>
		<div class="row">
			 <div class="col-md-2">
				{{ form_label(form.nom, 'Nom') }}
				<div id="formcarnet-nom"  class="form-group">
					{{ form_widget(form.nom, { 'attr': {'class': 'form-control form-control-left'} }) }}
				</div>
			 </div>
			 <div class="col-md-3">
				{{ form_label(form.cognoms, 'Cognoms') }}
				<div id="formcarnet-cognoms"  class="form-group">
					{{ form_widget(form.cognoms, { 'attr': {'class': 'form-control form-control-left'} }) }}
				</div>
			 </div>
			 <div class="col-md-2">
				{{ form_label(form.nif, 'NIF/Pass.') }}
				<div id="formcarnet-nif"  class="form-group">
					{{ form_widget(form.nif, { 'attr': {'class': 'form-control form-control-center'} }) }}
				</div>
			 </div>
		</div>
		<div class="row">
			<div class="col-md-3">
				{{ form_label(form.num, 'Número de certificat') }}
				<div id="formcarnet-num"  class="form-group">
					{{ form_widget(form.num, { 'attr': {'class': 'form-control form-control-left'} }) }}
				</div>
			 </div>
			 <div class="col-md-3">
				<div class="form-group">
					{{ form_label(form.dataemissio, 'Data d\'emissió baixa') }}
					<div id="formcarnet-dataemissio" class="input-group">
		  				<span class="input-group-addon">Des de</span>
						{{ form_widget(form.dataemissio, { 'attr': {'class': 'form-control form-control-center formtime-calendar'} }) }}
						<span class="input-group-addon input-group-addon-icon open-calendar"><span class="fa fa-calendar fa-1x"></span></span>
					</div>
				</div>
			 </div>
			 <div class="col-md-3">
				<div class="form-group">
					{{ form_label(form.datacaducitat, 'Data de caducitat') }}
					<div id="formcarnet-datacaducitat" class="input-group">
		  				<span class="input-group-addon">Des de</span>
						{{ form_widget(form.datacaducitat, { 'attr': {'class': 'form-control form-control-center formtime-calendar'} }) }}
						<span class="input-group-addon input-group-addon-icon open-calendar"><span class="fa fa-calendar fa-1x"></span></span>
					</div>
				</div>
			 </div>
		</div>
		<!-- <div class="row">
			 <div class="col-md-5">
				<div class="form-group">
					{# form_label(form.logo, 'Imatge del logo del club...') #}
					{# form_widget(form.logo, { 'attr': {'class': 'form-control'} }) #}
					<div class="input-group" style="position:relative;">
						<span class="input-group-addon">Navegar...</span>
						<input id="upload-file-info" class="form-control" type="text">
				        <span class="input-group-addon input-group-addon-action">
				        	<a class="input-append" href="javascript:void(0);"><i class="fa fa-folder-open fa-1x orange"></i></a>
				        </span>
				    </div>
				</div>
			 </div>
		</div> -->
		<div class="row">
			 <div class="col-md-12">
				<div class="form-group">
					<label>&nbsp;</label>
				 	<div class="input-group">
						<button type="submit" id="formcarnet-imprimir" class="btn btn-default btn-lg"><i class="fa fa-print"></i> Imprimir</button>
					</div>
				 </div>
			 </div>	
		</div>
		
		<div id="formcarnet-rest">{{ form_rest(form) }}</div>
		
    </form>

{% endblock %}

{% block javascripts %}

	{{ parent() }}

	<!-- Datetime plugin's. http://xdsoft.net/jqplugins/datetimepicker/ -->
	<script src="{{ asset('js/jquery.datetimepicker.js') }}" type="text/javascript"></script>

	<script type="text/javascript">

		$(document).ready(function(){
			setMenuActive("menu-admincarnet");

			var current = new Date();
			var mindate = new Date (current.getFullYear()-1, current.getMonth() + 1, current.getDay()); // Un any endarrera
			var maxdate = new Date (current.getFullYear(), current.getMonth() + 2, current.getDay());  // 1 mes futur
			initDateTimePicker ( 
				$( '#form_dataemissio' ), 
				current, 
				maxdate, 
				current, 
				'dataemissio-picker', 
				false,
				''
			);

			maxdate = new Date (current.getFullYear()+1, current.getMonth() + 2, current.getDay());  // 1 mes i 1 any futur 
			
			initDateTimePicker ( 
				$( '#form_datacaducitat' ), 
				current, 
				maxdate, 
				maxdate, 
				'datacaducitat-picker', 
				false,
					''
			);

			//prepareFileInput( $("#form_logo") );

			// Cerca federat
			init_cercapersones_JSON('#form_federat', 
									'Cercar per dni o nom dades del federat ... ', 
									"{{  path('FecdasBundle_jsonpersones') }}",
									function(dades) {
										// Callback. Exemple {"id":"47422","text":"Pere ABADAL GONZALEZ","nom":"Pere","cognoms":"ABADAL GONZALEZ","dni":"77112119L"}
				 						$("#form_nom").val(dades.nom);
				 						$("#form_cognoms").val(dades.cognoms);
				 						$("#form_nif").val(dades.dni);
									});
			
			
		});
	</script>


{% endblock %}


{# src/Fecdas/PartesBundle/Resources/views/Page/producte.html.twig #}
{% extends 'FecdasBundle::layout.html.twig' %}

{% block stylesheets %}
	
	<link href="{{ asset('css/jquery.datetimepicker.css') }}" type="text/css" rel="stylesheet" />
	
	{{ parent() }}
{% endblock %}

{% block title %}Aplicació gestió FECDAS. Gestió de productes{% endblock %}

{% block body %}
    <header>
        <h1>Gestió de productes</h1>
    </header>
   
	{% for flashMessage in app.session.flashbag.get('error-notice') %}
	    <div class="sms-notice">
			{{ flashMessage }}
  		</div>	
	{% endfor %}
	<form id="formproducte" action="{{ path('FecdasBundle_editarproducte') }}" method="post" {{ form_enctype(form) }}  class="appform">
		<div class="row">
			 <div class="col-md-2">
				{{ form_label(form.codi, 'Codi comptabilitat') }}
				<div id="formproducte-codi"  class="">
					{{ form_widget(form.codi, { 'attr': {'class': 'form-control form-control-right'} }) }}
				</div>
			 </div>
			 <div class="col-md-1">
				{{ form_label(form.abreviatura, 'Abreviatura') }}
				<div id="formproducte-abreviatura"  class="">
					{{ form_widget(form.abreviatura, { 'attr': {'class': 'form-control form-control-center'} }) }}
				</div>
			 </div>
			 <div class="col-md-3">
			    <div id="formproducte-tipus" class="form-group">
			    	{{ form_label(form.tipus, 'Tipus de producte') }}
					<div class="input-group"><div class="input-group-addon">tipus</div>{{ form_widget(form.tipus, { 'attr': {'class': 'form-control'} }) }}</div>
				</div>
			 </div>
			 <div class="col-md-2">
				{{ form_label(form.minim, 'Uds. mínim') }}
				<div id="formproducte-minim"  class="">
					{{ form_widget(form.minim, { 'attr': {'class': 'form-control form-control-center'} }) }}
				</div>
			 </div>
			 <div class="col-md-3">
				<div class="form-group">
					{{ form_label(form.databaixa, 'Data de baixa') }}
					<div id="formproducte-databaixa" class="input-group">
		  				<span class="input-group-addon">Des de</span>
						{{ form_widget(form.databaixa, { 'attr': {'class': 'form-control form-control-center formtime-calendar'} }) }}
						<span class="input-group-addon input-group-addon-icon open-calendar"><span class="fa fa-calendar fa-1x"></span></span>
					</div>
				</div>
			 </div>
			<div class="col-md-6">
				<div class="form-group">
					{{ form_label(form.descripcio, 'Descripció') }}
					<div id="formproducte-descripcio"  class="input-group ">
			  			<span class="input-group-addon">Descripció</span>
						{{ form_widget(form.descripcio, { 'attr': {'class': 'form-control'} }) }}
					</div>
				</div>
			</div>
			<div class="col-md-6">
			 	<div class="form-group">
				 	<label>
				 		<div class="checkbox-inline"><h4>{{ form_widget(form.stockable) }} stock</h4></div>
					 </label>
				 	<div id="formproducte-stock"  class="">
				 		<div class="row">
							 <div class="col-md-4">
								<div class="form-group">
									<div id="formproducte-minim"  class="input-group ">
						  				<span class="input-group-addon">Límit</span>
										{{ form_widget(form.limitnotifica, { 'attr': {'class': 'form-control form-control-center'} }) }}
									</div>
								</div>
							 </div>
							 <div class="col-md-4">
								<div class="form-group">
									<div id="formproducte-stock"  class="input-group ">
						  				<span class="input-group-addon">Stock</span>
										{{ form_widget(form.stock, { 'attr': {'class': 'form-control form-control-center'} }) }}
									</div>
								</div>
							 </div>
						</div>
				 	</div>
				</div>
			</div>
		</div>
		
		<div class="row">
			 <div class="col-md-12">
	    		<h4 class="blue">Import del producte</h4>
			 </div>
			 <div class="col-md-2">
				<div class="form-group">
					{{ form_label(form.anypreus, 'Any') }}
					<div id="formproducte-minim"  class="input-group ">
		  				<span class="input-group-addon"><i class="fa fa-calendar-o"></i></span>
						{{ form_widget(form.anypreus, { 'attr': {'class': 'form-control'} }) }}
					</div>
				</div>
			 </div>
			 <div class="col-md-2">
				<div class="form-group">
					{{ form_label(form.preu, 'Preu') }}
					<div id="formproducte-stock"  class="input-group ">
						{{ form_widget(form.preu, { 'attr': {'class': 'form-control form-control-right'} }) }}
						<span class="input-group-addon"><i class="fa fa-euro"></i></span>
					</div>
				</div>
			 </div>
			 <div class="col-md-2">
				<div class="form-group">
					{{ form_label(form.iva, 'IVA') }}
					<div id="formproducte-stock"  class="input-group ">
						<span class="input-group-addon">%</span>
						{{ form_widget(form.iva, { 'attr': {'class': 'form-control form-control-center'} }) }}
					</div>
				</div>
			 </div>
		</div>
		
		<div class="row">
			 <div class="col-md-12">
				<button type="submit" id="formproducte-desar" class="btn btn-default btn-lg">Desar <i class="fa fa-save"></i></button>
			 </div>			
		</div>
         
		<div id="formproducte-rest">{{ form_rest(form) }}</div>
		
		<div id="error" class="sms-notice" style="display:none"> </div>	
    </form>

{% endblock %}

{% block javascripts %}

	{{ parent() }}

	<!-- Datetime plugin's. http://xdsoft.net/jqplugins/datetimepicker/ -->
	<script src="{{ asset('js/jquery.datetimepicker.js') }}" type="text/javascript"></script>

	<script type="text/javascript">
	
		$(document).ready(function(){
			setMenuActive("menu-admproducte");

			var current = new Date();
			
			var maxdate = new Date (current.getFullYear(), current.getMonth() + 1, current.getDay());
			initDateTimePicker ( 
				$( '#producte_databaixa' ), 
				current, 
				maxdate, 
				current, 
				'databaixa-picker', 
				false,
				''
			);
			alert(window.location.pathname+'?id='+$('#producte_id').val()+'&anypreu='+$('#producte_anypreus').val());

			{% if (producte.id is not null) %}
				$('#producte_anypreus').change( function() {
					
					
					window.location = window.location.pathname+'?id='+$('#producte_id').val()+'&anypreu='+$(this).val();
				} );
			{% endif %} 
			
		});
	
	</script>


{% endblock %}


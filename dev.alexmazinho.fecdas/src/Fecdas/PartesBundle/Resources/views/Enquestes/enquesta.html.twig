{# src/Fecdas/PartesBundle/Resources/views/Enquestes/enquesta.html.twig #}
{% extends 'FecdasPartesBundle::layout.html.twig' %}

{% block javascriptshead %}
 	{{ parent() }}
   	<script src="{{ asset('js/jquery.ui.datepicker-ca.js') }}" type="text/javascript"></script>
   	 {{ form_javascript(form) }}
{% endblock %}

{% block title %}Aplicació gestió FECDAS. Gestió d'enquestes {% endblock %}

{% block body %}
    <header>
        <h1>Gestió d'enquestes</h1>
    </header>
   
	<form id="formenquesta" action="{{ path('FecdasPartesBundle_enquesta') }}" method="post" {{ form_enctype(form) }}  class="appform">
		{%  if form_errors(form) is not empty %}
			<div class="sms-notice">{{ form_errors(form)  }}</div>
		{% endif %}	

		<div id="formenquesta-id">
			{{ form_widget(form.id) }}
		</div>
		<div class="form-row clearfix">
			<div id="formenquesta-desc">
				{{ form_label(form.descripcio, 'Descripció', { 'attr': {'class': 'formlabel-outside'} }) }}
				{{ form_widget(form.descripcio, { 'attr': {'class': 'formfield-outside'} }) }}
			</div>
			<div id="formenquesta-dates">
				<label class="formlabel-outside required">S'activarà en data</label>
				{{ form_widget(form.datainici, { 'attr': {'class': 'formfield-outside'} }) }}
				<br/><br/>
				<label class="formlabel-outside required">Es tancarà en data</label>
				{{ form_widget(form.datafinal, { 'attr': {'class': 'formfield-outside'} }) }}
			</div>
        </div>
         
        <div class="form-row clearfix">
			<div id="formenquesta-submit" class="enquesta-submit">	
				<input type="submit" id="formenquesta-button-save" class="forminput-inside" value="Desar" name="formenquesta-button-save"/>
			</div>
        </div>
		<div id="formenquesta-rest">	{{ form_rest(form) }}</div>
		
		 {% if app.session.hasFlash('error-notice') %}
    		<div class="sms-notice">  {{ app.session.flash('error-notice') }}	</div>
    	{% endif %}	
    </form>

    <div id="progressbar" style="display:none"><img src="/images/icon_progress.gif"></div>
    
	<div id="seleccio-preguntes">
		<div class="bloc-preguntes">
			<div id="list-header" class="clearfix">
				<div class="col-listheader">Preguntes seleccionades</div> 
			</div>
			<ul id="sortablesi" class="connectedSortable list-variableheight">
				{% for pregunta in preguntessi %}
					<li id="pregunta_{{ pregunta.id }}" class="list-variableheight-detall clearfix">
		  				<div class="pregunta-id">{{ pregunta.id }}</div>
		  				<div class="pregunta-enunciat">{{ pregunta.enunciat }}</div>
	  				</li>
			   	{% endfor %}
			</ul>
		</div>
		<div class="bloc-preguntes bloc-preguntes-dreta">
			<div id="list-header" class="clearfix">
				<div class="col-listheader">Preguntes excloses</div> 
			</div>
			
			<ul id="sortableno" class="connectedSortable list-variableheight">
				{% for pregunta in preguntesno %}
					<li id="pregunta_{{ pregunta.id }}"  class="list-variableheight-detall  clearfix">
		  				<div class="pregunta-id">{{ pregunta.id }}</div>
		  				<div class="pregunta-enunciat">{{ pregunta.enunciat }}</div>
	  				</li>
	  			{% else %}
	  				<div class="sms-footer">cap pregunta exclosa</div>
			   	{% endfor %}
			</ul>
		</div>
	</div> 
     
{% endblock %}

{% block javascripts %}

{{ parent() }}

<script type="text/javascript">

$(document).ready(function(){
	setMenuActive("menu-enquestas");

	gestionarSortables();

	submitEnquestes();

});

</script>


{% endblock %}

